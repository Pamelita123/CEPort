<app-loader></app-loader>
<main>
  <div class="dashboard-container">
    <nav-bar></nav-bar>

    <div class="welcome-section">
      <h1>Bienvenido {{ username() }}</h1>
      <p class="subtitle">¿Listo para recargar?</p>
    </div>
        <section class="charging-points">
  <h2>Puntos de Carga en Tiempo Real</h2>
  <div class="chargers-grid">
    <app-card
      title="Cargador 1"
      sensorType="Sensor Ultrasónico HC-SR04"
      [rightValue]="ul1Value() !== null ? ul1Value()!.toString() : 'N/A'"
      [rightSubtitle]="ul1Value() !== null && ul1UpdatedAt() ? 'Distancia: ' + ul1Value() + ' cm - Actualizado: ' + ul1UpdatedAt() : (ul1Value() !== null ? 'Distancia: ' + ul1Value() + ' cm' : 'Sin datos')"
      [showChart]="false"
      class="sensor-card">
      <div style="width:100%; height:200px;">
        <canvas #charger1Chart></canvas>
      </div>
      <app-status-tag text="Listo para Cargar"></app-status-tag>
    </app-card>


    <app-card
      title="Cargador 2"
      sensorType="Sensor Ultrasónico HC-SR04"
      [rightValue]="ul2Value() !== null ? ul2Value()!.toString() : 'N/A'"
      [rightSubtitle]="ul2Value() !== null && ul2UpdatedAt() ? 'Distancia: ' + ul2Value() + ' cm - Actualizado: ' + ul2UpdatedAt() : (ul2Value() !== null ? 'Distancia: ' + ul2Value() + ' cm' : 'Sin datos')"
      [showChart]="false"
      class="sensor-card">
      <div style="width:100%; height:200px;">
        <canvas #charger2Chart></canvas>
      </div>
      <app-status-tag text="Carga en Proceso"></app-status-tag>
    </app-card>
  </div>
</section>
    <section class="environmental-conditions">
      <h2>Condiciones Ambientales</h2>
      <div class="conditions-grid">
        <app-card
          title="Calidad del Aire"
          sensorType="Sensor MQ2"
          [rightValue]="gasValue() !== null ? gasValue()!.toString() : ''"
          unit="PPM"
          [rightSubtitle]="gasUpdatedAt() ? 'Actualizado: ' + gasUpdatedAt() : 'Sin datos'"
          class="metric-card">
          <app-status-tag [text]="gasStatusText()"></app-status-tag>
        </app-card>

        <app-card
          title="Clima"
          sensorType="DHT22"
          class="climate-card"
          [rightSubtitle]="tempUpdatedAt() ? 'Actualizado: ' + tempUpdatedAt() : 'Sin datos'"
          [rightValue]="'°C'">
          <div class="climate-data">
            <div class="climate-item">
              <span class="value">{{tempValue() !== null ? tempValue()!.toFixed(1) + ' °C' : ''}}</span>
              <span class="label">Temperatura</span>
            </div>
            <div class="climate-item">
              <span class="value">{{ humidityValue() !== null ? humidityValue()!.toFixed(0) + '%' : '' }}</span>
              <span class="label">Humedad</span>
            </div>
          </div>
        </app-card>
      </div>
    </section>

    <section class="activity-section">
      <h2>Actividad Registrada</h2>
      <div class="activity-grid">
        <app-card
          title="Nivel de Ruido"
          sensorType="Micrófono"
          [rightValue]="soundValue() !== null ? soundValue()!.toString() : ''"
          unit="dB"
          [rightSubtitle]="soundUpdatedAt() ? 'Actualizado: ' + soundUpdatedAt() : 'Sin datos'"
          class="metric-card">
          <app-status-tag [text]="soundStatusText()"></app-status-tag>
        </app-card>

        <app-card
          title="Tránsito"
          [rightValue]="motionValue() !== null ? motionValue()!.toString() : '1'"
          [rightSubtitle]="motionUpdatedAt() ? 'Última detección: ' + motionUpdatedAt() : 'Sin datos'"
          class="metric-card">
          <app-status-tag [text]="motionStatusText()"></app-status-tag>
        </app-card>
      </div>
    </section>

    <section class="notifications-section">
      <h2>Notificaciones del Sistema</h2>
      <app-card
        title="Estado del Sistema"
        content="Todos los sensores están operando con normalidad y no se han detectado fallas en el sistema">
        
      </app-card>
    </section>
  </div>
</main>